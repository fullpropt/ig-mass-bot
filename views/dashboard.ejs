<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>IG-MASS-BOT PRO</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
</head>
<body class="section">
<div class="container">
  <h1 class="title">IG-MASS-BOT PRO</h1>

  <div class="box">
    <h2 class="title is-5">Bots ativos</h2>
    <table class="table is-fullwidth is-striped">
      <thead><tr><th>User</th><th>Status</th><th>Fila</th><th>Enviados</th><th>Falhas</th><th>Proxy</th></tr></thead>
      <tbody>
      <% bots.forEach(b => { %>
        <tr>
          <td><%= b.username %></td>
          <td><%= b.status %></td>
          <td><%= b.queued %></td>
          <td><%= b.stats.sent || 0 %></td>
          <td><%= b.stats.failed || 0 %></td>
          <td style="max-width:160px;word-break:break-all;"><%= b.proxy || 'none' %></td>
        </tr>
      <% }) %>
      </tbody>
    </table>
  </div>

  <div class="columns">
    <div class="column">
      <div class="box">
        <h3 class="title is-5">Rodar massdm</h3>
        <form action="/bots/<%= firstBot || 'none' %>/massdm" method="post" enctype="multipart/form-data">
          <div class="field">
            <label class="label">Bot</label>
            <div class="select is-fullwidth">
              <select name="username" onchange="this.form.action='/bots/'+this.value+'/massdm'">
                <% if (!bots.length) { %>
                  <option value="">Nenhum bot — adicione ao lado</option>
                <% } %>
                <% bots.forEach(b => { %><option value="<%= b.username %>"><%= b.username %></option><% }) %>
              </select>
            </div>
          </div>
          <div class="field">
            <label class="label">Template</label>
            <textarea class="textarea" name="template" rows="3"><%= settings.baseMessage %></textarea>
          </div>
          <div class="field"><label class="label">Link</label><input class="input" name="link" value="<%= settings.defaultLink %>"></div>
          <div class="field"><label class="label">Lista</label>
            <div class="select is-fullwidth">
              <select name="listPath">
                <% files.forEach(f => { %><option value="<%= path.join(settings.listsDir, f) %>"><%= f %></option><% }) %>
              </select>
            </div>
            <p class="help">ou upload</p>
            <input type="file" name="listfile">
          </div>
          <div class="field"><label class="label">Mídia (opcional)</label><input type="file" name="mediafile"></div>
          <div class="field"><button class="button is-primary" <% if(!bots.length){ %>disabled<% } %>>Iniciar</button></div>
        </form>
      </div>

      <div class="box">
        <h3 class="title is-5">Mass Like</h3>
        <form action="/actions/<%= firstBot || 'none' %>/like" method="post">
          <div class="field">
            <label class="label">Bot</label>
            <select class="select" name="username" onchange="this.form.action='/actions/'+this.value+'/like'">
              <% if (!bots.length) { %><option value="">Nenhum bot</option><% } %>
              <% bots.forEach(b => { %><option value="<%= b.username %>"><%= b.username %></option><% }) %>
            </select>
          </div>
          <div class="field">
            <label class="label">Lista de media IDs</label>
            <select class="select" name="listPath">
              <% files.forEach(f => { %><option value="<%= path.join(settings.listsDir, f) %>"><%= f %></option><% }) %>
            </select>
          </div>
          <div class="field"><label class="label">Limite</label><input class="input" name="limit" value="50"></div>
          <button class="button is-primary" <% if(!bots.length){ %>disabled<% } %>>Mass Like</button>
        </form>
      </div>

      <div class="box">
        <h3 class="title is-5">Mass Comment</h3>
        <form action="/actions/<%= firstBot || 'none' %>/comment" method="post">
          <div class="field">
            <label class="label">Bot</label>
            <select class="select" name="username" onchange="this.form.action='/actions/'+this.value+'/comment'">
              <% if (!bots.length) { %><option value="">Nenhum bot</option><% } %>
              <% bots.forEach(b => { %><option value="<%= b.username %>"><%= b.username %></option><% }) %>
            </select>
          </div>
          <div class="field">
            <label class="label">Lista de media IDs</label>
            <select class="select" name="listPath">
              <% files.forEach(f => { %><option value="<%= path.join(settings.listsDir, f) %>"><%= f %></option><% }) %>
            </select>
          </div>
          <div class="field"><label class="label">Template</label><textarea class="textarea" name="template" rows="2">Nice!</textarea></div>
          <div class="field"><label class="label">Limite</label><input class="input" name="limit" value="20"></div>
          <button class="button is-link" <% if(!bots.length){ %>disabled<% } %>>Mass Comment</button>
        </form>
      </div>

      <div class="box">
        <h3 class="title is-5">Mass Report</h3>
        <form action="/actions/<%= firstBot || 'none' %>/report" method="post">
          <div class="field">
            <label class="label">Bot</label>
            <select class="select" name="username" onchange="this.form.action='/actions/'+this.value+'/report'">
              <% if (!bots.length) { %><option value="">Nenhum bot</option><% } %>
              <% bots.forEach(b => { %><option value="<%= b.username %>"><%= b.username %></option><% }) %>
            </select>
          </div>
          <div class="field"><label class="label">Targets (user IDs, uma por linha)</label>
            <textarea class="textarea" name="targets" rows="4"></textarea>
          </div>
          <div class="field"><label class="label">Count</label><input class="input" name="count" value="5"></div>
          <div class="field"><label class="label">Reason</label><input class="input" name="reason" value="spam"></div>
          <button class="button is-danger" <% if(!bots.length){ %>disabled<% } %>>Mass Report</button>
        </form>
      </div>
    </div>

    <div class="column">
      <div class="box">
        <h3 class="title is-5">Adicionar bot (hot add)</h3>
        <form action="/bots/add" method="post">
          <label class="label">Username</label><input class="input" name="username" required>
          <label class="label">Senha</label><input class="input" type="password" name="password" placeholder="opcional se usar cookie">
          <label class="label">Proxy</label><input class="input" name="proxy" placeholder="http://user:pass@ip:port">
          <label class="label">Cookie</label><textarea class="textarea" name="cookie" rows="3"></textarea>
          <button class="button is-link">Adicionar</button>
        </form>
      </div>

      <div class="box">
        <h3 class="title is-5">Importar sessão JSON</h3>
        <form action="/sessions/upload" method="post" enctype="multipart/form-data">
          <label class="label">Username</label><input class="input" name="username" required>
          <label class="label">Arquivo .json</label><input type="file" name="sessionfile" required>
          <button class="button is-primary">Enviar</button>
        </form>
      </div>

      <div class="box">
        <h3 class="title is-5">Criar contas automáticas</h3>
        <form action="/accounts/create" method="post">
          <p class="help">Requer CREATE_V2=true; usa Puppeteer + 2Captcha + temp-mail; 1 proxy/conta.</p>
          <label class="label">Quantidade</label><input class="input" name="qty" value="1">
          <button class="button is-warning">Criar</button>
        </form>
      </div>
    </div>
  </div>
</div>
</body>
</html>
